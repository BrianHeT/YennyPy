{% include 'components/nav.html' %}
{% block title %}Detalle del libro {{ book.title }}{% endblock %}

{% block content %}
<div class="container mt-4">

    <h1 class="mb-3">{{ book.title }}</h1>

    <td class="px-6 py-4 whitespace-nowrap">
    {% if book.image %}
        {% set image_src = book.image %}
        
        {% if not image_src.startswith('http') %} 
            {% set image_src = s3_config.BASE_URL ~ book.image %}
        {% endif %}

        <img src="{{ image_src }}" alt="{{ book.title }}" class="h-16 w-12 object-cover rounded-md shadow-sm">
    {% else %}
    {% endif %}
</td>

    <dl class="row">
        <dt class="col-sm-3">Precio:</dt>
        <dd class="col-sm-9">${{ book.price }}</dd>

        <dt class="col-sm-3">Fecha de publicación:</dt>
        <dd class="col-sm-9">
            {% if book.release_date %}
                {{ book.release_date.strftime("%d/%m/%Y") }}
            {% else %}
                Sin fecha
            {% endif %}
        </dd>

        <dt class="col-sm-3">Formato:</dt>
        <dd class="col-sm-9">{{ book.format or "No especificado" }}</dd>

        <dt class="col-sm-3">Editorial:</dt>
        <dd class="col-sm-9">{{ book.editorial or "No especificada" }}</dd>

        <dt class="col-sm-3">Autor:</dt>
        <dd class="col-sm-9">{{ book.author_name }}</dd>

        <dt class="col-sm-3">Géneros:</dt>
        <dd class="col-sm-9">
            {% if book.genres %}
                {% for g in book.genres %}
                    <span class="badge bg-secondary me-1">{{ g.name }}</span>
                {% endfor %}
            {% else %}
                Sin géneros
            {% endif %}
        </dd>
    </dl>

    <hr class="mb-4">

    <h2 class="mb-3">Sinopsis</h2>
    <p>{{ book.synopsis or "Sin sinopsis disponible." }}</p>

</div>
{% endblock %}
{% include 'components/footer.html' %}
