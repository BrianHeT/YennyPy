{% include 'components/nav.html' %}
{% block title %}Detalle del libro {{ book.title }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/book-detail.css') }}">

<div class="book-detail-container">
    
    <div class="book-detail-card">
        <div class="book-detail-header">
            <h1 class="book-detail-title">{{ book.title }}</h1>
        </div>

        <div class="book-detail-content">
            <!-- Image Section -->
            <div class="book-image-section">
                <div class="book-image-wrapper">
                    {% if book.image %}
                        {% set image_src = book.image %}
                        
                        {% if not image_src.startswith('http') %} 
                            {% set image_src = s3_config.BASE_URL ~ book.image %}
                        {% endif %}

                        <img src="{{ image_src }}" alt="{{ book.title }}" class="book-image">
                    {% else %}
                        <img src="{{ url_for('static', filename='images/placeholder-book.png') }}" alt="Sin imagen" class="book-image">
                    {% endif %}
                </div>
            </div>

            <!-- Info Section -->
            <div class="book-info-section">
                <dl class="book-info-list">
                    <div class="book-info-item">
                        <dt class="book-info-label">Precio:</dt>
                        <dd class="book-info-value book-price">${{ book.price }}</dd>
                    </div>

                    <div class="book-info-item">
                        <dt class="book-info-label">Fecha de publicación:</dt>
                        <dd class="book-info-value">
                            {% if book.release_date %}
                                {{ book.release_date.strftime("%d/%m/%Y") }}
                            {% else %}
                                <span class="no-data-text">Sin fecha</span>
                            {% endif %}
                        </dd>
                    </div>

                    <div class="book-info-item">
                        <dt class="book-info-label">Formato:</dt>
                        <dd class="book-info-value">{{ book.format or "No especificado" }}</dd>
                    </div>

                    <div class="book-info-item">
                        <dt class="book-info-label">Editorial:</dt>
                        <dd class="book-info-value">{{ book.editorial or "No especificada" }}</dd>
                    </div>

                    <div class="book-info-item">
                        <dt class="book-info-label">Autor:</dt>
                        <dd class="book-info-value">{{ book.author_name }}</dd>
                    </div>

                    <div class="book-info-item">
                        <dt class="book-info-label">Géneros:</dt>
                        <dd class="book-info-value">
                            {% if book.genres %}
                                <div class="book-genres">
                                    {% for g in book.genres %}
                                        <span class="genre-badge">{{ g.name }}</span>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <span class="no-data-text">Sin géneros</span>
                            {% endif %}
                        </dd>
                    </div>
                </dl>
            </div>
        </div>
    </div>

    <!-- Synopsis Section -->
    <div class="book-synopsis-section">
        <h2 class="synopsis-title">Sinopsis</h2>
        <p class="synopsis-text">{{ book.synopsis or "Sin sinopsis disponible." }}</p>
    </div>

</div>
{% endblock %}
{% include 'components/footer.html' %}
