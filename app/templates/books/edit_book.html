<link rel="stylesheet" href="/static/style.css">


{% block content %}
<div class="book-form-container">
  <div class="book-form-card">
    <div class="book-form-header">
      <h4>Editar libro</h4>
    </div>
    
    <form method="POST" enctype="multipart/form-data">
      {{ form.hidden_tag() }}

      <div class="form-group">
        {{ form.title.label(class="form-label") }}
        {{ form.title(class="form-control", placeholder="Ingrese el título del libro") }}
      </div>

      <div class="form-row">
        <div class="form-group">
          {{ form.price.label(class="form-label") }}
          {{ form.price(class="form-control", placeholder="0.00") }}
        </div>
        <div class="form-group">
          {{ form.quantity.label(class="form-label") }}
          {{ form.quantity(class="form-control", placeholder="0") }}
        </div>
      </div>

      <div class="form-group">
        {{ form.release_date.label(class="form-label") }}
        {{ form.release_date(class="form-control") }}
      </div>

      <div class="form-group">
        {{ form.format.label(class="form-label") }}
        {{ form.format(class="form-control") }}
      </div>

      <div class="form-group">
        {{ form.editorial.label(class="form-label") }}
        {{ form.editorial(class="form-control", placeholder="Nombre de la editorial") }}
      </div>

      <div class="form-group">
        {{ form.author_name.label(class="form-label") }}
        {{ form.author_name(class="form-control", placeholder="Nombre del autor") }}
      </div>

      <div class="form-group">
        {{ form.synopsis.label(class="form-label") }}
        {{ form.synopsis(class="form-control", rows="5", placeholder="Escriba una breve sinopsis del libro...") }}
      </div>

      <div class="form-group">
        <label class="form-label">Géneros</label>
        <select name="genres" multiple class="form-select">
          {% for id, name in form.genres.choices %}
            <option value="{{ id }}" {% if id in form.genres.data %}selected{% endif %}>{{ name }}</option>
          {% endfor %}
        </select>
        <span class="form-text">Mantén presionado Ctrl (Cmd en Mac) para seleccionar múltiples géneros</span>
      </div>

      <div class="image-preview-container">
        <span class="image-preview-label">Portada actual</span>
        {% if book.image %}
          <img src="{{ generate_presigned_url_for_key(book.image) }}" alt="Portada actual" class="current-image">
        {% else %}
          <div class="no-image-placeholder">Sin imagen</div>
        {% endif %}
      </div>

      <div class="form-group">
        {{ form.image.label(class="form-label") }}
        <input type="file" name="image" class="form-control" accept="image/*">
        <span class="form-text">Sube una nueva imagen para reemplazar la actual</span>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-success">Guardar cambios</button>
        <a href="{{ url_for('books.list_books') }}" class="btn btn-outline-secondary">Cancelar</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
